<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0,maximum-scale=1.0, user-scalable=no"/>
	<title>Document</title>
	<style>
		*{
			margin: 0;
			padding: 0;
		}
		.box{
			width: 100%;
			height: 400px;
			overflow: hidden;
		}
		.boxcon{
			width: 300%;
			height: 400px;
		}
		.con{
			height: 100%;
			float: left;
		}
	</style>
</head>
<body>
	<div class="box">
		<div class="boxcon">
			<div class="con"style="background:red">
				<!-- <a href="www.baidu.com"style="display:block;width:100%;height:100%"></a> -->
			</div>
			<div class="con"style="background:green">
				<!-- <a href="www.163.com"style="display:block;width:100%;height:100%"></a> -->
			</div>
			<div class="con"style="background:pink"></div>
		</div>
	</div>
</body>
<script>
// 放图容器，需设定宽度
// 每个图片宽度



	var cw=document.documentElement.clientWidth;
	var boxcon=document.getElementsByClassName("boxcon")[0];
	var con=document.getElementsByClassName("con");
	var box=document.getElementsByClassName("box")[0];
	for (var i = 0; i < con.length; i++) {
		con[i].style.width=cw+"px"
	};
	box.style.width=cw+"px"
	var index=0;
	boxcon.addEventListener("touchstart",function(e){
			var aa=e.targetTouches[0];
			var cx=aa.clientX;
			var sj=e.timeStamp;
			var mx;
			var nsj=0;
			var k;
		window.addEventListener("touchmove",move)
		function move(e){
			var aa=e.targetTouches[0];
			mx=aa.clientX;
			nsj=e.timeStamp;
			k=Math.abs(e.changedTouches[0].clientX-cx);
			boxcon.style.transition="";
			boxcon.style.transform="translate3d("+(mx-cx-index*cw)+"px,0,0)"
		}
		boxcon.addEventListener("touchend",end)
		function end(e){
			window.removeEventListener("touchmove",move)
			
			if(Math.abs(mx-cx)>=cw/2||(nsj-sj<300&&k>50)){
				console.log(k)
			// if(Math.abs(mx-cx)>=cw/2||mx!=0){
				if(mx-cx>0){
					index--;
				}else{
					index++;
				}
			}
			if(index>con.length-1){
				index=con.length-1;
			}
			if(index<0){
				index=0
			}
			boxcon.style.transition="transform .4s"
			boxcon.style.transform="translate3d("+(-index*cw)+"px,0,0)"
			boxcon.removeEventListener("touchend",end)
		}
	})
	var num=0;
	function lb(){
		num++;
		if(num>con.length-1){
			num=0
		}
		boxcon.style.transition="transform .4s"
		boxcon.style.transform="translate3d("+(-num*cw)+"px,0,0)"
	}
	var t=setInterval(lb,1000)
	box.addEventListener("touchstart",function(){
		clearInterval(t)
	})
	box.addEventListener("touchend",function(){
		t=setInterval(lb,2000)
	})
</script>
</html>